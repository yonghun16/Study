# Axios ê°œë… ì •ë¦¬

## Axiosë€?

> HTTP ìš”ì²­ì„ ì‰½ê²Œ ë³´ë‚¼ ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬

- ì‰½ê²Œ ë§í•´, **ë°±ì—”ë“œ ì„œë²„ë‚˜ ì™¸ë¶€ APIì™€ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë„êµ¬**ì…ë‹ˆë‹¤.
- React ê°™ì€ í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ì™€ í•¨ê»˜ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.

---

## HTTP ìš”ì²­ì´ë€?

> ì„œë²„ì— "ì •ë³´ ì¢€ ì£¼ì„¸ìš”!" í•˜ëŠ” ê²ƒ

- **í´ë¼ì´ì–¸íŠ¸**(ë¸Œë¼ìš°ì €, ì•±)ê°€ ìš”ì²­ì„ ë³´ë‚´ê³   
  **ì„œë²„(API)**ê°€ ì‘ë‹µì„ í•´ì£¼ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

---

## HTTP ìš”ì²­ì˜ 4ê°€ì§€ í•µì‹¬ ì¢…ë¥˜

| ë©”ì„œë“œ | ì„¤ëª…               | ì˜ˆì‹œ                      |
| ------ | ------------------ | ------------------------- |
| GET    | ì •ë³´ë¥¼ ë‹¬ë¼ê³  ìš”ì²­ | "ìƒí’ˆ ëª©ë¡ ì¢€ ë³´ì—¬ì¤˜!"    |
| POST   | ì •ë³´ë¥¼ ì„œë²„ì— ë³´ëƒ„ | "ì¥ë°”êµ¬ë‹ˆì— ì´ê±° ë‹´ì•„ì¤˜!" |
| PUT    | ê¸°ì¡´ ì •ë³´ë¥¼ ìˆ˜ì •í•¨ | "ë°°ì†¡ ì£¼ì†Œë¥¼ ë°”ê¿€ê²Œìš”!"   |
| DELETE | ì •ë³´ë¥¼ ì‚­ì œí•¨      | "ì¥ë°”êµ¬ë‹ˆì—ì„œ ì´ê±° ë¹¼ì¤˜!" |

---

## HTTP ìš”ì²­ì„ ë³´ë‚´ëŠ” í‘œì¤€ ë„êµ¬

### 1. fetch (ê¸°ë³¸ ë‚´ì¥, í‘œì¤€ API)

- ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ê¸°ë³¸ ë‚´ì¥ëœ HTTP ìš”ì²­ í•¨ìˆ˜
- ë¸Œë¼ìš°ì €ë§Œ ìˆìœ¼ë©´ ë”°ë¡œ ì„¤ì¹˜ ì—†ì´ ì‚¬ìš© ê°€ëŠ¥

#### â— í•˜ì§€ë§Œ?

- ì‘ë‹µì„ ì§ì ‘ JSONìœ¼ë¡œ íŒŒì‹±í•´ì•¼ í•¨
- ì—ëŸ¬ ì²˜ë¦¬ê°€ ì¡°ê¸ˆ ê¹Œë‹¤ë¡­ê³  ë³µì¡í•¨
- ê³µí†µ ì„¤ì •ì´ë‚˜ ìš”ì²­ ì·¨ì†Œ ë“±ì„ í•˜ë ¤ë©´ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•¨

### 2. Axios (ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬)

- ì„¤ì¹˜ê°€ í•„ìš”í•¨
  ```bash
  npm install axios
  ```

#### â— í•˜ì§€ë§Œ?

- ì‘ë‹µì„ ë°”ë¡œ res.dataë¡œ ì‚¬ìš© ê°€ëŠ¥ (ìë™ íŒŒì‹±)
- ì—ëŸ¬ ì²˜ë¦¬ ëª…í™• (try/catchë‚˜ .catch)
- í—¤ë” ì„¤ì •, ìš”ì²­ ì·¨ì†Œ, ì¸í„°ì…‰í„° ë“± ê³ ê¸‰ ê¸°ëŠ¥ë„ ì†ì‰½ê²Œ ì‚¬ìš© ê°€ëŠ¥
- ë” ì§ê´€ì ì´ê³  ì‚¬ìš©ì´ ì‰¬ì›€

---

## ë¹„êµ ì˜ˆì‹œ (ìƒí’ˆ ëª©ë¡ì„ GET ìš”ì²­ìœ¼ë¡œ ë°›ì•„ì˜¤ê¸°)

### fetch ì‚¬ìš©

```js
fetch("https://shopping.com/products") // 1) ì´ ì£¼ì†Œë¡œ GET ìš”ì²­ì„ ë³´ëƒ„
  .then((response) => response.json()) // 2) ì‘ë‹µì„ ë°›ìœ¼ë©´ .json()ìœ¼ë¡œ íŒŒì‹± (ìë™ X)
  .then((data) => {
    // 3) JSON ë°ì´í„°ê°€ ì¤€ë¹„ë˜ë©´ ì‹¤í–‰
    console.log(data); // 4) ë°›ì•„ì˜¨ ë°ì´í„° ì¶œë ¥
  })
  .catch((err) => {
    // 5) ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ê°™ì€ í° ë¬¸ì œë§Œ catch ë¨
    console.error(err);
  });
```

- ì‘ë‹µ ê°ì²´(response)ê°€ ë¨¼ì € ì˜¤ê³  â†’ `response.json()`ìœ¼ë¡œ ì§ì ‘ JSONìœ¼ë¡œ ë°”ê¿”ì•¼ í•¨
- 400ë²ˆëŒ€ë‚˜ 500ë²ˆëŒ€ ì—ëŸ¬ëŠ” `.catch()`ë¡œ ì•ˆ ë“¤ì–´ì˜¤ê³  `response.ok`ë¡œ ë”°ë¡œ ê²€ì‚¬í•´ì•¼ í•¨

### Axios ì‚¬ìš©

```js
axios
  .get("https://shopping.com/products") // 1) ì´ ì£¼ì†Œë¡œ GET ìš”ì²­ì„ ë³´ëƒ„
  .then((res) => {
    // 2) ì„œë²„ê°€ ì‘ë‹µí•˜ë©´ ì‹¤í–‰ë˜ëŠ” ë¶€ë¶„
    console.log(res.data); // 3) ì‘ë‹µì—ì„œ ì‹¤ì œ ë°ì´í„°ë§Œ êº¼ë‚´ì„œ ì¶œë ¥
  })
  .catch((err) => {
    // 4) ìš”ì²­ ë„ì¤‘ ë¬¸ì œê°€ ìƒê¸°ë©´ ì—¬ê¸°ì„œ ì—ëŸ¬ ì²˜ë¦¬
    console.error(err); //    (ì˜ˆ: ì¸í„°ë„· ëŠê¹€, ì„œë²„ ì—ëŸ¬ ë“±)
  });
```

- `res.data`: ì‘ë‹µì—ì„œ JSON ë°ì´í„°ë¥¼ ë°”ë¡œ êº¼ë‚¼ ìˆ˜ ìˆìŒ â†’ ìë™ìœ¼ë¡œ íŒŒì‹±ë¨
- ì—ëŸ¬ë„ `.catch()` ì•ˆìœ¼ë¡œ ì˜ ë“¤ì–´ì˜´ (ì‘ë‹µ ì‹¤íŒ¨ + ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ë‹¤ ì²˜ë¦¬ë¨)

ì•„ì£¼ ê°„ë‹¨í•œ í”„ë¡œì íŠ¸ê±°ë‚˜ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ í•˜ê³  ì‹¶ì„ ë•ŒëŠ” **fetch**ë¥¼ ì¶”ì²œ  
ìš”ì²­ì´ ë§ê³  ë³µì¡í•œ ì‹¤ì „ í”„ë¡œì íŠ¸(ì›¹ ì‡¼í•‘ëª°, SNS ë“±)ì—ëŠ” **axios** ì¶”ì²œ  
ê²°ë¡ ì ìœ¼ë¡œ 2ì°¨ í”„ë¡œì íŠ¸ ì£¼ì œê°€ ì‡¼í•‘ëª°ì´ê¸° ë•Œë¬¸ì— **axios ì‚¬ìš©í•˜ëŠ” ê²Œ ë” íš¨ìœ¨ì ì´ê³  ì¶”ì²œë¨**

---

## ê·¸ë ‡ë‹¤ë©´ ì–¸ì œ axiosë¥¼ ì‚¬ìš©í•˜ê²Œ ë ê¹Œ?

1. ìƒí’ˆ ëª©ë¡ì„ ì„œë²„ì—ì„œ ê°€ì ¸ì˜¬ ë•Œ
2. ë¡œê·¸ì¸í•  ë•Œ ì‚¬ìš©ì ì •ë³´ë¥¼ ë³´ë‚¼ ë•Œ
3. ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì„ ë‹´ì„ ë•Œ
4. ì£¼ë¬¸ ì •ë³´ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•  ë•Œ

---

## ì‚¬ìš© ì˜ˆì‹œ â€” ìƒí’ˆ ëª©ë¡ì„ ì„œë²„ì—ì„œ ë°›ì•„ì™€ì„œ í™”ë©´ì— ë³´ì—¬ì¤€ë‹¤

```jsx
import React, { useEffect, useState } from "react";
import axios from "axios";

function ProductList() {
  const [products, setProducts] = useState([]);

  useEffect(() => {
    // GET ìš”ì²­ ë³´ë‚´ê¸°
    axios
      .get("https://shopping.com/products")
      .then((res) => {
        setProducts(res.data); // ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ ìƒíƒœì— ì €ì¥
      })
      .catch((err) => {
        console.error("ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
      });
  }, []);

  return (
    <ul>
      {products.map((p) => (
        <li key={p.id}>
          {p.name} - {p.price}ì›
        </li>
      ))}
    </ul>
  );
}
```

### ì‘ë™ íë¦„ ìš”ì•½

#### 1ë‹¨ê³„: ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë¨

ProductListë¼ëŠ” React ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ì²˜ìŒ ë‚˜íƒ€ë‚˜ìš”.

#### 2ë‹¨ê³„: `useEffect()` ì‹¤í–‰ë¨

ì´ í›…(`useEffect`)ì€ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ í™”ë©´ì— ë‚˜íƒ€ë‚¬ì„ ë•Œ í•œ ë²ˆ ì‹¤í–‰ë˜ëŠ” ë¡œì§ì´ì—ìš”.  
ì´ ì•ˆì—ì„œ Axiosë¡œ HTTP GET ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.

#### 3ë‹¨ê³„: Axiosê°€ HTTP ìš”ì²­ì„ ë³´ëƒ„

AxiosëŠ” ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ì•„ë˜ì²˜ëŸ¼ ìƒê¸´ HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ ì„œë²„ë¡œ ë³´ëƒ…ë‹ˆë‹¤.

```http
GET /products HTTP/1.1
Host: shopping.com
```

ë¸Œë¼ìš°ì €ê°€ ì‹¤ì œë¡œ ì´ ë©”ì‹œì§€ë¥¼ ì„œë²„ë¡œ ë‚ ë ¤ìš”.

#### 4ë‹¨ê³„: ì„œë²„ê°€ ì‘ë‹µì„ ë³´ëƒ„

ì„œë²„ëŠ” products ëª©ë¡ì„ JSONìœ¼ë¡œ ëŒë ¤ì¤ë‹ˆë‹¤.

```json
[
  { "id": 1, "name": "ì…”ì¸ ", "price": 20000 },
  { "id": 2, "name": "ì²­ë°”ì§€", "price": 30000 }
]
```

#### 5ë‹¨ê³„: `res.data`ì— ë°ì´í„°ê°€ ë“¤ì–´ê°

AxiosëŠ” ì„œë²„ ì‘ë‹µì„ ë°›ê³ , ê·¸ ì‘ë‹µì˜ `data` ë¶€ë¶„ì„ êº¼ë‚´ì„œ `setProducts()`ì— ë„£ìŠµë‹ˆë‹¤.

```js
setProducts(res.data);
```

ì´ê±´ productsë¼ëŠ” ìƒíƒœ(state)ë¥¼ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜

#### 6ë‹¨ê³„: ìƒíƒœê°€ ë°”ë€Œë©´ ë‹¤ì‹œ ë Œë”ë§ë¨

`products` ìƒíƒœê°€ ë°”ë€Œë©´ ReactëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ë Œë”ë§í•©ë‹ˆë‹¤.  
ì¦‰, í™”ë©´ì— ìƒí’ˆ ëª©ë¡ì´ ë‚˜íƒ€ë‚˜ëŠ” ê±°ì˜ˆìš”.



## Axios ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©ì˜ˆì œ
### ğŸ”„ Axios ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

Axios ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê³µí†µ ì„¤ì •ì„ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- baseURL (ê¸°ë³¸ URL)
- ê³µí†µ headers
- ì¸í„°ì…‰í„° (ìš”ì²­/ì‘ë‹µ ê°€ë¡œì±„ê¸°)
- í† í° ìë™ ì¶”ê°€ ë“±
ğŸ’¡ ì¦‰, ì—¬ëŸ¬ API ìš”ì²­ì—ì„œ ì¤‘ë³µ ì½”ë“œë¥¼ ì¤„ì´ê³ , ìœ ì§€ ë³´ìˆ˜ë¥¼ ì‰½ê²Œ í•˜ê¸° ìœ„í•œ íŒ¨í„´ì…ë‹ˆë‹¤.

### src/api.js
```js
// src/api.js
import axios from 'axios';

const api = axios.create({
  baseURL: import.meta.env.PROD ? '' : 'http://localhost:3000', // í™˜ê²½ì— ë”°ë¼ ì„¤ì •
  headers: {
    'Content-Type': 'application/json',
  },
    withCredentials: true,   // ì¿ í‚¤ í¬í•¨ (í•„ìš”í•œ ê²½ìš°)
                            // í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €)ê°€ ì„œë²„ì— HTTP ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ì¿ í‚¤ë‚˜ ì¸ì¦ ì •ë³´(ì„¸ì…˜ ì¿ í‚¤ ë“±)ë¥¼ ìë™ìœ¼ë¡œ ê°™ì´ ë³´ë‚´ë„ë¡ ì§€ì‹œ
});

export default api;
```

### ProductList.jsx
```js
// ProductList.jsx
import React, { useEffect, useState } from "react";
import api from "./api"; // ì•„ê¹Œ ë§Œë“  ì¸ìŠ¤í„´ìŠ¤ë¥¼ import

function ProductList() {
  const [products, setProducts] = useState([]);

  useEffect(() => {
    api
      .get("/products") // baseURLì´ ìë™ìœ¼ë¡œ ë¶™ìŒ
      .then((res) => {
        setProducts(res.data);
      })
      .catch((err) => {
        console.error("ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
      });
  }, []);

  return (
    <ul>
      {products.map((p) => (
        <li key={p.id}>
          {p.name} - {p.price}ì›
        </li>
      ))}
    </ul>
  );
}

export default ProductList;
```


### interceptors
- Axiosì—ì„œ interceptors.request.use()ëŠ” **ëª¨ë“  ìš”ì²­(Request)**ì´ ì„œë²„ë¡œ ë³´ë‚´ì§€ê¸° ì „ì— ê°€ë¡œì±„ì„œ(request intercept) íŠ¹ì • ì‘ì—…ì„ í•˜ë„ë¡ í•´ì£¼ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.
ì´ëŠ” ì¸ì¦ í† í° ì¶”ê°€, ë¡œê¹…, í—¤ë” ì„¤ì • ë“± ê³µí†µ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.

```js
axiosInstance.interceptors.request.use(
  (config) => {
    // ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— ì‘ì—… ìˆ˜í–‰
    return config;
  },
  (error) => {
    // ìš”ì²­ ì—ëŸ¬ ë°œìƒ ì‹œ ì‘ì—… ìˆ˜í–‰
    return Promise.reject(error);
  }
);
```
