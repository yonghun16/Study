# 세션과 JWT


### 1. 세션 기반 인증 (Session-based Authentication)
#### 📌 정의:
- 서버가 사용자 로그인 정보를 메모리에 저장하고, 사용자에게는 세션 ID를 쿠키에 담아 보냄.
- 이후 요청마다 쿠키를 통해 세션 ID가 전송되며, 서버가 세션 정보를 조회해 인증 여부를 판단함.

#### 🔐 인증 흐름:
1. 로그인 성공 → 서버가 세션 생성 + ID 발급
2. 클라이언트에게 세션 ID를 쿠키로 전달
3. 클라이언트는 요청마다 쿠키에 세션 ID 포함
4. 서버는 세션 저장소에서 해당 ID의 사용자 정보 조회

#### 🗂️ 특징:
- 서버에 세션 저장소(메모리, Redis 등) 필요
- 로그아웃, 세션 만료 등의 제어가 쉬움


### 2 JWT 기반 인증 (Token-based Authentication, 특히 JWT: JSON Web Token)
#### 📌 정의:
- 로그인 성공 시, 서버는 **사용자 정보를 암호화한 토큰(JWT)**을 생성하여 클라이언트에게 전달
- 이후 요청마다 클라이언트는 이 토큰을 HTTP 헤더에 실어 전송
- 서버는 이 토큰을 검증만 하고 별도의 세션 저장은 하지 않음

#### 🔐 인증 흐름:
1. 로그인 성공 → 서버가 JWT 생성 (암호화된 사용자 정보 포함)
2. 클라이언트가 토큰을 저장 (보통 localStorage or 쿠키)
3. 이후 요청마다 Authorization 헤더에 토큰 포함
4. 서버는 토큰의 서명을 검증해서 사용자 인증


### 🗂️ 특징:
- 서버 상태 없음 (stateless) → 수평 확장에 유리
- 토큰 자체에 정보가 담겨 있어 디코딩만으로 인증 정보 확인
- 로그아웃 처리나 토큰 만료 관리가 상대적으로 어려움 (토큰을 강제로 무효화하는 기능은 없음)


### 🆚 세션 vs JWT 비교
| 항목                 | 세션 방식                | JWT 방식                               |
|----------------------|--------------------------|----------------------------------------|
| 인증 정보 저장       | 서버 메모리/DB           | 토큰 자체                              |
| 클라이언트 저장 방식 | 세션 ID (쿠키)           | JWT 토큰 (쿠키 또는 localStorage)      |
| 서버 확장성          | 서버 간 세션 공유 필요   | 무상태(Stateless), 확장성 좋음         |
| 보안                 | 세션 하이재킹 주의       | 토큰 탈취 및 재사용 주의               |
| 로그아웃 처리        | 세션 제거로 즉시 가능    | 복잡함 (블랙리스트나 짧은 만료 필요)   |
| 구현 난이도          | 쉬움                     | 상대적으로 복잡                        |


### 💡 언제 무엇을 쓰면 좋을까?
| 상황                                    | 추천 방식     |
|-----------------------------------------|---------------|
| 단일 서버, 내부 서비스, 빠른 개발       | 세션 기반     |
| SPA(React 등) + REST API + 모바일 포함  | JWT 기반      |
| 수평 확장된 마이크로서비스 구조         | JWT 기반      |
| 엄격한 로그아웃/세션 만료 제어 필요     | 세션 기반     |
