# 📘 7. 생명주기와 Hooks 시스템

- 🔄 생명주기란?
  - 컴포넌트가 만들어지고, 업데이트되고, 사라지는 과정 전체를 말합니다.
  - 함수형 컴포넌트에서는 이 흐름을 Hooks를 통해 제어합니다.


### 📊 함수형 생명주기 흐름 (useEffect 기준)
| 단계       | 설명                                                                  |
|------------|-----------------------------------------------------------------------|
| 마운트     | 컴포넌트가 처음 나타날 때 (`useEffect(() => { ... }, [])`)            |
| 업데이트   | 상태(state)나 props가 변경될 때 (`useEffect(() => { ... }, [deps])`)  |
| 언마운트   | 컴포넌트가 사라질 때 (`useEffect(() => { return () => {...} }, [])`)  |


### 🧩 대표적인 Hooks
| Hook             | 설명                                                            |
|------------------|-----------------------------------------------------------------|
| useState         | 상태 값을 정의하고 변경할 수 있게 함                            |
| useEffect        | 사이드 이펙트를 다루는 hook (fetch, 이벤트 등록, 타이머 등)     |
| useLayoutEffect  | DOM 변경 직후 실행됨 (레이아웃 측정 등에 사용)                  |
| useRef           | 렌더링과 관계없는 값을 저장하거나 DOM에 직접 접근할 때 사용     |
| useReducer       | 복잡한 상태 로직 관리를 함수형으로 구현 가능                    |
| useContext       | 전역 상태처럼 context 값을 참조                                 |


### 🔬 useEffect의 구조
```jsx
useEffect(() => {
  // 실행할 코드 (마운트 또는 업데이트 시)
  return () => {
    // 정리(clean-up) 코드 (언마운트 시)
  };
}, [deps]);
```
- deps가 없다 → 마운트 한 번만 실행
- deps에 값이 있다 → 해당 값이 바뀔 때마다 실행
- return 문 → 언마운트(제거) 시 또는 deps가 변경되기 전 호출됨


### 🧠 컴퓨터 과학 관점에서 이해
| 개념             | 설명                                                           |
|------------------|----------------------------------------------------------------|
| 이벤트 루프      | useEffect는 브라우저 렌더링 이후 비동기 큐에 의해 실행됨       |
| 클로저           | useEffect 내부 함수는 렌더링 당시의 변수 스냅샷을 기억함       |
| 순수 함수 모델   | useEffect 외부는 순수 함수처럼 동작 → 이펙트는 별도로 처리     |


### ⏱ useEffect vs useLayoutEffect
| Hook              | 실행 시점                                   | 주 용도                         |
|-------------------|---------------------------------------------|---------------------------------|
| useEffect         | 렌더링 이후 비동기적으로 실행               | 일반적인 비동기 처리, fetch 등  |
| useLayoutEffect   | 렌더링 직후, 화면에 그리기 전에 동기 실행   | 레이아웃 측정, 스크롤 위치 조정 |


### 💬 요약
- 생명주기는 Mount → Update → Unmount 순으로 진행됨
- useEffect를 사용해 생명주기 타이밍에 맞춰 비동기 작업, 정리 작업 수행 가능
- useRef, useLayoutEffect 등은 DOM과 직접 상호작용이 필요할 때 사용
