<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      .form-hide {
        display: none;
      }
    </style>
  </head>

  <body>
    <main>
      <form class="container my-5 form-group">
        <p>상품선택</p>
        <select class="form-select mt-2">
          <option>모자</option>
          <option>셔츠</option>
          <option>바지</option>
        </select>
        <select class="form-select mt-2 form-hide">
        </select>
      </form>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"></script>

    <script>
      // Q : 서버에서 물품의 사양이 수시로 바뀌면 어떻게 대응하지?
      // A : 서버에서 데이터 가져와서 그거 갯수만큼 <option>만들면 될 듯

      /* forEach */
      var pants = [28, 30, 32, 34];      // 서버에서 보내준 데이터라고 가정

      var select = document.querySelectorAll('.form-select')[0];

      select.addEventListener('change', function () {
        const subList = document.querySelectorAll('.form-select')[1];  // 하위 리스트 선택
        subList.innerHTML = '';  // 하위 리스트 초기화

        if (this.value === '바지') {  // 바지 선택했다면,
          subList.classList.remove('form-hide');  // 하위 리스트를 보이게 하고
          pants.forEach(function (item) {  // 서버의 데이터 만큼 반복
            //var option = document.createElement('option'); // <option> 만들기
            //option.innerHTML = item;       // <option>에 데이터 쓰기
            //subList.appendChild(option);   // 하위 리스트에 쓰기
            subList.innerHTML += `<option>${item}</option>`;   // 한 줄로 쓰기
          });
        } else {
          subList.classList.add('form-hide');
        }

      });

      /* for ...in */
      // 주로 객체에 사용 : key 순회(문자열)
      var obj = {
        name: 'kim', 
        age: 20
      }

      for (var key in obj) {
        console.log(key, obj[key]);
      }

      /* for ...of */
      // 주로 배열, 문자열, set, Map에 사용 : value 순회
      var array = [1, 2, 3, 4, 5];

      for (var value of array) {
        console.log(value);
      }

      /* forEach() */
      // 주로 배열 : value, index 순회
      var array = [1, 2, 3, 4, 5];

      array.forEach(function (item, index) {
        console.log(item, index);
      });
    </script>
  </body>

</html>
