<!-- 이벤트 연결 제거하기 -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>이벤트 연결 제거하기</title>
  </head>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let counter = 0
      let isConnect = false

      const h1 = document.querySelector('h1')
      const p = document.querySelector('p')
      const connectButton = document.querySelector('#connect')
      const disconnectButton = document.querySelector('#disconnect')

      const listener = (event) => {
        h1.textContent = `클릭 횟수: ${counter++}`
        // 이벤트를 제거하려면 이벤트리스너를 변수 또는 상수로 가지고 있어야 한다.
      }

      connectButton.addEventListener('click', ()=> {
        if (isConnect === false) {
          h1.addEventListener('click', listener)
          p.textContent = '이벤트 연결 상태: 연결'
          isConnect = true
        }
      })

      disconnectButton.addEventListener('click', () => {
        if (isConnect === true) {
          h1.removeEventListener('click', listener)   // 해제할 때 이벤트리스너를 사용
          p.textContent = '이벤트 연결 상태: 해제'
          isConnect = false
        }
      })
    })
  </script>

  <style>
    h1 {
      /* 클릭을 여러 번 했을 때
         글자가 선택되는 것을 막기 위한 스타일 */
      user-select: none;
    }
  </style>

  <body>
    <h1> 클릭 횟수: 0 </h1>
    <button id="connect"> 이벤트 연결 </button>
    <button id="disconnect"> 이벤트 제거 </button>
    <p>이벤트 연결 상태: 해제</p>
  </body>
</html> 
